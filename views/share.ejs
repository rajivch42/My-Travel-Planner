<%- include('partials/header') %>

<div class="share-page-container">
    <div class="share-page-wrapper">
        <header class="share-header">
            <h1>Trip to <%= trip.destination %></h1>
            <p class="trip-dates">
                <%= trip.startDate.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' }) %> 
                - 
                <%= trip.endDate.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' }) %>
            </p>
        </header>

        <main class="share-content">
            <% trip.itinerary.forEach((day, dayIndex) => { %>
                <section class="day-section">
                    <div class="day-header">
                        <h2>Day <%= dayIndex + 1 %>: <%= day.title %></h2>
                        <p class="day-date"><%= day.dayDate.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' }) %></p>
                    </div>

                    <div class="day-places">
                        <% if (day.places && day.places.length > 0) { %>
                            <% day.places.forEach((place, placeIndex) => { %>
                                <div class="place-card-share">
                                    <div class="place-number"><%= placeIndex + 1 %></div>
                                    
                                    <div class="place-thumbnail">
                                        <img src="<%= place.photoUrl || '/images/placeholder.jpg' %>" 
                                             alt="<%= place.name %>" 
                                             onerror="this.src='/images/placeholder.jpg'">
                                    </div>
                                    
                                    <div class="place-details">
                                        <h3 class="place-name"><%= place.name %></h3>
                                        <p class="place-address"><%= place.address %></p>
                                        
                                        <div class="place-meta">
                                            <span class="meta-item">
                                                <span class="meta-icon">üïí</span>
                                                <%= place.scheduledTime || 'Time not set' %>
                                            </span>
                                            <span class="meta-item">
                                                <span class="meta-icon">üí∞</span>
                                                ‚Çπ<%= place.cost || 0 %>
                                            </span>
                                        </div>
                                    </div>
                                    
                                    <a href="https://www.google.com/maps?q=<%= place.lat %>,<%= place.lng %>" 
                                       class="btn-map-share" 
                                       target="_blank"
                                       rel="noopener noreferrer"
                                       title="View on Google Maps">
                                        <span class="map-icon">üìç</span>
                                    </a>
                                </div>
                            <% }); %>
                        <% } else { %>
                            <div class="no-places-message">
                                <p>No places added for this day yet.</p>
                            </div>
                        <% } %>
                    </div>
                </section>
            <% }); %>

            <% if (!trip.itinerary || trip.itinerary.length === 0) { %>
                <div class="empty-itinerary">
                    <p>No itinerary has been created for this trip yet.</p>
                </div>
            <% } %>
        </main>
    </div>
</div>

<%- include('partials/footer') %>